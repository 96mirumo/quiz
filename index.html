<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Daily Report</title> <style>
        :root { --bg: #f5f5f5; --card: #ffffff; --primary: #333333; --text: #444444; --border: #eeeeee; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; font-size: 16px; }
        .container { max-width: 500px; margin: 0 auto; }
        
        /* 스텔스 디자인: 심플한 리스트 형태 */
        .menu-card { background: var(--card); padding: 18px; border-radius: 8px; border: 1px solid var(--border); margin-bottom: 10px; cursor:pointer; }
        .unit-title { font-weight: 500; font-size: 1.05rem; color: #222; }
        
        .quiz-card { background: var(--card); padding: 25px; border-radius: 8px; border: 1px solid var(--border); }
        .q-text { font-size: 1.15rem; font-weight: 600; margin-bottom: 20px; color: #111; }
        
        input[type="text"] { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 1rem; margin-bottom: 10px; outline: none; }
        .opt-btn { width: 100%; padding: 12px; margin: 6px 0; background: #fff; border: 1px solid #eee; border-radius: 4px; text-align: left; font-size: 1rem; }
        
        .action-btn { width: 100%; padding: 12px; border: none; border-radius: 4px; font-weight: 600; font-size: 1rem; margin-top: 10px; cursor: pointer; }
        .next-btn { background: #444; color: #fff; }
        .hint-btn { background: #eee; color: #666; font-size: 0.9rem; }
        
        .hidden { display: none; }
        .progress-bar { height: 3px; background: #eee; border-radius: 2px; overflow: hidden; margin-bottom: 15px; }
        .p-inner { height: 100%; background: #999; transition: 0.3s; }
        .correct-ans { color: #28a745; font-size: 0.9rem; margin-top: 5px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <div id="view-menu">
            <h3 style="color:#222; margin-left:5px;">Dashboard</h3>
            <div class="menu-card" onclick="resumeLast()" style="background:#444; color:#fff; border:none;">
                <div>Continue Analysis</div>
                <small id="resume-info" style="opacity:0.8;">No recent records</small>
            </div>
            
            <div id="unit-buttons"></div>

            <div class="menu-card" onclick="startWrongAnswers()">
                <div style="color:#d9534f;">Review Flagged Items</div>
                <small id="wrong-count">0 items found</small>
            </div>
        </div>

        <div id="view-quiz" class="hidden">
            <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                <span id="display-unit" style="font-size:0.9rem; color:#888;"></span>
                <span onclick="goHome()" style="cursor:pointer; color:#ccc;">Close</span>
            </div>
            <div class="progress-bar"><div id="p-bar" class="p-inner"></div></div>

            <div class="quiz-card">
                <div id="q-text" class="q-text"></div>
                <div id="area-subjective">
                    <input type="text" id="user-ans" placeholder="Enter value..." autocomplete="off">
                    <button id="btn-check" class="action-btn next-btn" onclick="checkSubjective()">Verify</button>
                </div>
                <div id="area-objective" class="hidden"></div>
                <div id="correct-display" class="correct-ans hidden"></div>
                <div id="hint-box" class="hidden" style="background:#f9f9f9; padding:12px; margin:15px 0; font-size:0.9rem; border:1px dashed #ccc;"></div>
                
                <div style="display:flex; gap:8px;">
                    <button class="action-btn hint-btn" onclick="toggleHint()">Info</button>
                    <button id="btn-next" class="action-btn next-btn" style="display:none;" onclick="nextStep()">Next Stage</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 1단원 60문제 (핵심 압축본)
        const quizData = {
            1: [
                { type: "S", q: "소프트웨어의 품질을 높이기 위해 이미 개발된 시스템을 분석하여 재구성하는 공학 기술은?", a: ["재공학"], h: "분석, 재구성, 역공학, 이관 단계" },
                { type: "S", q: "애자일 방법론 중 하나로, '용기, 단순성, 의사소통, 피드백, 존중'을 핵심 가치로 하는 것은?", a: ["XP", "Extreme Programming"], h: "테스트 주도 개발(TDD) 강조" },
                { type: "S", q: "객체지향 설계 원칙(SOLID) 중 '자식 클래스는 부모 클래스의 기능을 수행할 수 있어야 한다'는 원칙은?", a: ["LSP", "리스코프 치환 원칙"], h: "Liskov Substitution Principle" },
                { type: "O", q: "모듈 독립성을 높이기 위한 올바른 상태는?", o: ["응집도 낮음, 결합도 높음", "응집도 높음, 결합도 낮음", "둘 다 낮음", "둘 다 높음"], a: 1, h: "Cohesion 높게, Coupling 낮게" },
                { type: "S", q: "UML 관계 중 전체 객체가 사라지면 부분 객체도 함께 사라지는 강한 포함 관계는?", a: ["합성 관계", "Composition"], h: "집합 관계보다 강한 결합" },
                { type: "S", q: "서브 클래스에서 객체 생성을 결정하도록 하는 생성 패턴은?", a: ["팩토리 메서드", "Factory Method"], h: "객체 생성 처리를 서브클래스로 위임" },
                { type: "S", q: "상위 모듈이 호출하고 하위 모듈이 응답하는 계층적 구조의 아키텍처는?", a: ["계층 구조", "레이어 패턴"], h: "Layered Pattern" },
                { type: "S", q: "전문가들이 모여 명세서 결함을 찾는 공식적 검토 기법은?", a: ["인스펙션", "Inspection"], h: "워크스루보다 엄격한 검토" },
                { type: "S", q: "UI 설계 원칙 중 사용자의 목적을 정확하게 달성하는 성질은?", a: ["유효성"], h: "정확성 및 완벽성" },
                { type: "S", q: "동일 시간대에 실행되는 모듈 내 요소들의 응집도는?", a: ["시간적 응집도"], h: "Temporal Cohesion" },
                { type: "S", q: "동일 자료 구조를 참조하는 모듈 간의 결합도는?", a: ["스탬프 결합도"], h: "Stamp Coupling" },
                { type: "S", q: "복잡한 서브시스템에 단순한 인터페이스를 제공하는 패턴은?", a: ["파사드", "Facade"], h: "단일 접점 제공" },
                { type: "S", q: "입력-처리-출력을 시각적으로 나타내는 시스템 분석 도구는?", a: ["HIPO"], h: "Hierarchy Input Process Output" },
                { type: "S", q: "상태 변화를 관찰하여 통지하는 디자인 패턴은?", a: ["옵저버", "Observer"], h: "발행-구독 모델" },
                { type: "S", q: "하위 모듈을 통합 테스트할 때 사용하는 가상 하위 모듈은?", a: ["스텁", "Stub"], h: "하향식 테스트에 사용" },
                { type: "S", q: "트랜잭션 모델링과 스키마 평가가 이루어지는 설계 단계는?", a: ["논리적 설계"], h: "개체-논리-물리 순서" },
                { type: "S", q: "인터페이스 보안을 위해 네트워크 계층에서 트래픽을 암호화하는 규격은?", a: ["IPSec"], h: "IP Security" },
                { type: "S", q: "메시지 기반으로 분산 앱 간 통신을 담당하는 미들웨어는?", a: ["MOM"], h: "Message Oriented Middleware" },
                { type: "S", q: "결합도가 가장 낮고 바람직한 단계는?", a: ["자료 결합도", "Data Coupling"], h: "데이터만 주고받는 형태" },
                { type: "S", q: "GoF 패턴 중 객체를 생성하기 위한 인터페이스를 정의하지만, 어떤 클래스를 인스턴스화할지는 서브클래스가 결정하게 하는 패턴은?", a: ["Factory Method", "팩토리 메서드"], h: "생성 패턴" },
                { type: "S", q: "객체지향 기법에서 클래스들 사이의 부분-전체 관계를 나타내는 것은?", a: ["집계 관계", "Aggregation"], h: "독립성 유지 가능" },
                { type: "S", q: "시스템의 성능 향상을 위해 정규화된 데이터 모델을 통합, 분리, 중복하는 기법은?", a: ["반정규화", "Denormalization"], h: "조인 횟수 감소 목적" },
                { type: "S", q: "애자일 방법론 중 짧은 개발 주기를 반복하며 진행하는 것은?", a: ["스크럼", "Scrum"], h: "백로그, 스프린트 등 키워드" },
                { type: "S", q: "UI 설계 원칙 중 누구나 쉽게 이해하고 사용할 수 있어야 한다는 원칙은?", a: ["직관성"], h: "Intuition" },
                { type: "S", q: "외부 환경과의 인터페이스를 담당하는 결합도는?", a: ["외부 결합도"], h: "External Coupling" },
                { type: "S", q: "모듈 내 요소들이 순차적으로 출력을 입력으로 사용하는 응집도는?", a: ["순차적 응집도"], h: "Sequential Cohesion" },
                { type: "S", q: "UML 다이어그램 중 시스템의 정적인 구조를 표현하는 대표적인 것은?", a: ["클래스 다이어그램"], h: "구조적 다이어그램" },
                { type: "S", q: "GoF 패턴 중 복잡한 객체의 생성 과정과 표현 방법을 분리하는 패턴은?", a: ["빌더", "Builder"], h: "생성 패턴" },
                { type: "S", q: "럼바우 분석 기법 중 제어 흐름, 이벤트 등을 다루는 모델링은?", a: ["동적 모델링"], h: "상태 다이어그램 활용" },
                { type: "S", q: "요구사항 분석에서 사용자 시점의 기능을 기술하는 도구는?", a: ["유스케이스", "Use Case"], h: "사용자와 시스템 간의 상호작용" }
                // ... (지면상 30문제 수록, 같은 양식으로 60개까지 확장 가능)
            ],
            2: [], 3: [], 4: [], 5: []
        };

        let curUnit = 1;
        let curIdx = 0;
        let score = 0;
        let isWrongMode = false;
        let wrongList = JSON.parse(localStorage.getItem('wrong_list')) || [];

        function renderMenu() {
            const list = document.getElementById('unit-buttons');
            list.innerHTML = '';
            for(let i=1; i<=5; i++) {
                const prog = localStorage.getItem(`prog_${i}`) || 0;
                const total = quizData[i].length;
                const percent = total > 0 ? Math.round((prog/total)*100) : 0;
                list.innerHTML += `
                    <div class="menu-card" onclick="startUnit(${i})">
                        <div class="unit-title">Section ${i}</div>
                        <div class="progress-bar" style="margin-top:8px;"><div class="p-inner" style="width:${percent}%"></div></div>
                    </div>`;
            }
            updateWrongCount();
            const lastU = localStorage.getItem('last_unit');
            const lastI = localStorage.getItem('last_idx');
            if(lastU) document.getElementById('resume-info').innerText = `Stage ${lastU} - Item ${parseInt(lastI)+1}`;
        }

        function startUnit(u) {
            if(quizData[u].length === 0) return;
            curUnit = u;
            curIdx = 0;
            score = 0;
            isWrongMode = false;
            initQuiz();
        }

        function initQuiz() {
            document.getElementById('view-menu').classList.add('hidden');
            document.getElementById('view-quiz').classList.remove('hidden');
            document.getElementById('display-unit').innerText = isWrongMode ? "Flagged Items" : `Section ${curUnit}`;
            loadQuestion();
        }

        function loadQuestion() {
            const data = isWrongMode ? wrongList : quizData[curUnit];
            const q = data[curIdx];
            document.getElementById('q-text').innerText = q.q;
            document.getElementById('user-ans').value = '';
            document.getElementById('hint-box').classList.add('hidden');
            document.getElementById('btn-next').style.display = 'none';
            document.getElementById('btn-check').style.display = 'block';
            document.getElementById('correct-display').classList.add('hidden');
            
            if(q.type === "S") {
                document.getElementById('area-subjective').classList.remove('hidden');
                document.getElementById('area-objective').classList.add('hidden');
            } else {
                document.getElementById('area-subjective').classList.add('hidden');
                document.getElementById('area-objective').classList.remove('hidden');
                const optDiv = document.getElementById('area-objective');
                optDiv.innerHTML = '';
                q.o.forEach((txt, i) => {
                    optDiv.innerHTML += `<button class="opt-btn" onclick="checkObjective(${i}, this)">${txt}</button>`;
                });
            }
            updateP();
        }

        function checkSubjective() {
            const user = document.getElementById('user-ans').value.trim().toLowerCase();
            const q = isWrongMode ? wrongList[curIdx] : quizData[curUnit][curIdx];
            const correct = q.a.map(v => v.toLowerCase());
            
            if(correct.includes(user)) {
                score++;
            } else {
                saveWrong(q);
                document.getElementById('correct-display').innerText = `Answer: ${q.a[0]}`;
                document.getElementById('correct-display').classList.remove('hidden');
            }
            endStep();
        }

        function checkObjective(idx, btn) {
            const q = isWrongMode ? wrongList[curIdx] : quizData[curUnit][curIdx];
            if(idx === q.a) {
                btn.style.background = "#d4edda";
                score++;
            } else {
                btn.style.background = "#f8d7da";
                saveWrong(q);
            }
            endStep();
        }

        function saveWrong(q) {
            if(!wrongList.some(item => item.q === q.q)) {
                wrongList.push(q);
                localStorage.setItem('wrong_list', JSON.stringify(wrongList));
                updateWrongCount();
            }
        }

        function endStep() {
            document.getElementById('btn-check').style.display = 'none';
            document.getElementById('btn-next').style.display = 'block';
            if(!isWrongMode) {
                localStorage.setItem(`prog_${curUnit}`, curIdx + 1);
                localStorage.setItem('last_unit', curUnit);
                localStorage.setItem('last_idx', curIdx);
            }
        }

        function nextStep() {
            const data = isWrongMode ? wrongList : quizData[curUnit];
            curIdx++;
            if(curIdx < data.length) {
                loadQuestion();
            } else {
                alert(`Finished. Score: ${Math.round(score/data.length*100)}`);
                goHome();
            }
        }

        function resumeLast() {
            const u = localStorage.getItem('last_unit');
            const i = localStorage.getItem('last_idx');
            if(u) {
                curUnit = parseInt(u);
                curIdx = parseInt(i);
                isWrongMode = false;
                initQuiz();
            }
        }

        function startWrongAnswers() {
            if(wrongList.length === 0) return alert("No items to review.");
            isWrongMode = true;
            curIdx = 0;
            score = 0;
            initQuiz();
        }

        function toggleHint() {
            const data = isWrongMode ? wrongList : quizData[curUnit];
            const h = document.getElementById('hint-box');
            h.innerText = data[curIdx].h;
            h.classList.toggle('hidden');
        }

        function updateP() {
            const data = isWrongMode ? wrongList : quizData[curUnit];
            const p = (curIdx / data.length) * 100;
            document.getElementById('p-bar').style.width = p + '%';
        }

        function updateWrongCount() {
            document.getElementById('wrong-count').innerText = `${wrongList.length} items found`;
        }

        function goHome() { location.reload(); }

        renderMenu();
    </script>
</body>
</html>
